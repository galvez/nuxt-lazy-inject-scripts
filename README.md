# nuxt-lazy-inject-scripts

This is a Nuxt 2 module that allows you to **specify when to inject scripts**, similar to [Astro's partial hydration component tags](https://docs.astro.build/core-concepts/component-hydration/). Nuxt 2 already offers the [`injectScripts`](https://nuxtjs.org/docs/configuration-glossary/configuration-render/#injectscripts) option that lets you turn off scripts completely.

The function needs to take a callback, which when executed will cause the app scripts to load.

Inspired by [Islands Mode](https://fastify-vite.dev/guide/island-mode.html) in [fastify-vite](https://fastify-vite.dev/).

## Install

```bash
npm i nuxt-lazy-inject-scripts
```

## Usage

In **nuxt.config.js**:

```js

function after3Seconds (callback) {
  setTimeout(callback, 3000)
}

export default {
  injectScriptsWhen: after3Seconds,
}
```

The function passed to `injectScriptsWhen` needs to be a named one â€” an arrow function or an anonymous one won't work because the module relies on `Function.toString()` and `Function.name` to inject the lazy loader script into HTML files generated by Nuxt.js

## Sponsor

<a href="https://feature.fm">
<img 
alt="feature.fm" 
src="https://user-images.githubusercontent.com/12291/138519865-b85847ab-fe8f-4956-90ca-96058129f20e.png">
</a>

## License 

MIT
